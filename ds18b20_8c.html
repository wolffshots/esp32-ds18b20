<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>esp32-ds18b20: /home/travis/build/wolffshots/esp32-ds18b20/ds18b20.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">esp32-ds18b20
   </div>
   <div id="projectbrief">ESP32-compatible C library for Maxim Integrated DS18B20 Programmable Resolution 1-Wire Digital Thermometer.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">/home/travis/build/wolffshots/esp32-ds18b20/ds18b20.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &quot;freertos/FreeRTOS.h&quot;</code><br />
<code>#include &quot;freertos/task.h&quot;</code><br />
<code>#include &quot;driver/gpio.h&quot;</code><br />
<code>#include &quot;esp_system.h&quot;</code><br />
<code>#include &quot;esp_log.h&quot;</code><br />
<code>#include &quot;<a class="el" href="ds18b20_8h_source.html">ds18b20.h</a>&quot;</code><br />
<code>#include &quot;owb.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a00a197b9f0513f05f9b8831e5bdb549a"><td class="memItemLeft" align="right" valign="top"><a id="a00a197b9f0513f05f9b8831e5bdb549a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a00a197b9f0513f05f9b8831e5bdb549a">DS18B20_FUNCTION_TEMP_CONVERT</a>&#160;&#160;&#160;0x44</td></tr>
<tr class="memdesc:a00a197b9f0513f05f9b8831e5bdb549a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initiate a single temperature conversion. <br /></td></tr>
<tr class="separator:a00a197b9f0513f05f9b8831e5bdb549a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7678d66e1a401bb395636dc417664d0d"><td class="memItemLeft" align="right" valign="top"><a id="a7678d66e1a401bb395636dc417664d0d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a7678d66e1a401bb395636dc417664d0d">DS18B20_FUNCTION_SCRATCHPAD_WRITE</a>&#160;&#160;&#160;0x4E</td></tr>
<tr class="memdesc:a7678d66e1a401bb395636dc417664d0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write 3 bytes of data to the device scratchpad at positions 2, 3 and 4. <br /></td></tr>
<tr class="separator:a7678d66e1a401bb395636dc417664d0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70140f8d40a40e71b48d4386f8e82f62"><td class="memItemLeft" align="right" valign="top"><a id="a70140f8d40a40e71b48d4386f8e82f62"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a70140f8d40a40e71b48d4386f8e82f62">DS18B20_FUNCTION_SCRATCHPAD_READ</a>&#160;&#160;&#160;0xBE</td></tr>
<tr class="memdesc:a70140f8d40a40e71b48d4386f8e82f62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read 9 bytes of data (including CRC) from the device scratchpad. <br /></td></tr>
<tr class="separator:a70140f8d40a40e71b48d4386f8e82f62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a783ce55ae1d89d9cd01a692a9195f51f"><td class="memItemLeft" align="right" valign="top"><a id="a783ce55ae1d89d9cd01a692a9195f51f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a783ce55ae1d89d9cd01a692a9195f51f">DS18B20_FUNCTION_SCRATCHPAD_COPY</a>&#160;&#160;&#160;0x48</td></tr>
<tr class="memdesc:a783ce55ae1d89d9cd01a692a9195f51f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy the contents of the scratchpad to the device EEPROM. <br /></td></tr>
<tr class="separator:a783ce55ae1d89d9cd01a692a9195f51f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27ea9f0dbf8e2c6fa8d79d2d468a55be"><td class="memItemLeft" align="right" valign="top"><a id="a27ea9f0dbf8e2c6fa8d79d2d468a55be"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a27ea9f0dbf8e2c6fa8d79d2d468a55be">DS18B20_FUNCTION_EEPROM_RECALL</a>&#160;&#160;&#160;0xB8</td></tr>
<tr class="memdesc:a27ea9f0dbf8e2c6fa8d79d2d468a55be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restore alarm trigger values and configuration data from EEPROM to the scratchpad. <br /></td></tr>
<tr class="separator:a27ea9f0dbf8e2c6fa8d79d2d468a55be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa067e5a0e98a6d7a23206802f8a910f6"><td class="memItemLeft" align="right" valign="top"><a id="aa067e5a0e98a6d7a23206802f8a910f6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#aa067e5a0e98a6d7a23206802f8a910f6">DS18B20_FUNCTION_POWER_SUPPLY_READ</a>&#160;&#160;&#160;0xB4</td></tr>
<tr class="memdesc:aa067e5a0e98a6d7a23206802f8a910f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if a device is using parasitic power. <br /></td></tr>
<tr class="separator:aa067e5a0e98a6d7a23206802f8a910f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aed8e8a35acbf8bfb53d1ee260a90f216"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#aed8e8a35acbf8bfb53d1ee260a90f216">ds18b20_malloc</a> (void)</td></tr>
<tr class="memdesc:aed8e8a35acbf8bfb53d1ee260a90f216"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a new device info instance. New instance should be initialised before calling other functions.  <a href="ds18b20_8c.html#aed8e8a35acbf8bfb53d1ee260a90f216">More...</a><br /></td></tr>
<tr class="separator:aed8e8a35acbf8bfb53d1ee260a90f216"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bcd6ceb76caa4add04ca65582eede00"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a5bcd6ceb76caa4add04ca65582eede00">ds18b20_free</a> (<a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> **ds18b20_info)</td></tr>
<tr class="memdesc:a5bcd6ceb76caa4add04ca65582eede00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete an existing device info instance.  <a href="ds18b20_8c.html#a5bcd6ceb76caa4add04ca65582eede00">More...</a><br /></td></tr>
<tr class="separator:a5bcd6ceb76caa4add04ca65582eede00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ebf4dd600763c360de01ef69439f587"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a4ebf4dd600763c360de01ef69439f587">ds18b20_init</a> (<a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *ds18b20_info, const OneWireBus *bus, OneWireBus_ROMCode rom_code)</td></tr>
<tr class="memdesc:a4ebf4dd600763c360de01ef69439f587"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise a device info instance with the specified GPIO.  <a href="ds18b20_8c.html#a4ebf4dd600763c360de01ef69439f587">More...</a><br /></td></tr>
<tr class="separator:a4ebf4dd600763c360de01ef69439f587"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a345a04f36d80c7cd63352cdcfe83dd99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a345a04f36d80c7cd63352cdcfe83dd99">ds18b20_init_solo</a> (<a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *ds18b20_info, const OneWireBus *bus)</td></tr>
<tr class="memdesc:a345a04f36d80c7cd63352cdcfe83dd99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise a device info instance as a solo device on the bus.  <a href="ds18b20_8c.html#a345a04f36d80c7cd63352cdcfe83dd99">More...</a><br /></td></tr>
<tr class="separator:a345a04f36d80c7cd63352cdcfe83dd99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada1765c5a55c8a389f11f2daebc9e0a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#ada1765c5a55c8a389f11f2daebc9e0a2">ds18b20_use_crc</a> (<a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *ds18b20_info, bool use_crc)</td></tr>
<tr class="memdesc:ada1765c5a55c8a389f11f2daebc9e0a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable or disable use of CRC checks on device communications.  <a href="ds18b20_8c.html#ada1765c5a55c8a389f11f2daebc9e0a2">More...</a><br /></td></tr>
<tr class="separator:ada1765c5a55c8a389f11f2daebc9e0a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d9266fa752d3f6d533250324af16e67"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a4d9266fa752d3f6d533250324af16e67">ds18b20_set_resolution</a> (<a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *ds18b20_info, <a class="el" href="ds18b20_8h.html#aa5d863756e0d9cb7548b9f166e4af9d4">DS18B20_RESOLUTION</a> resolution)</td></tr>
<tr class="memdesc:a4d9266fa752d3f6d533250324af16e67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set temperature measurement resolution.  <a href="ds18b20_8c.html#a4d9266fa752d3f6d533250324af16e67">More...</a><br /></td></tr>
<tr class="separator:a4d9266fa752d3f6d533250324af16e67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c90f57ce8738ad042f022adb40b864c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ds18b20_8h.html#aa5d863756e0d9cb7548b9f166e4af9d4">DS18B20_RESOLUTION</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a6c90f57ce8738ad042f022adb40b864c">ds18b20_read_resolution</a> (<a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *ds18b20_info)</td></tr>
<tr class="memdesc:a6c90f57ce8738ad042f022adb40b864c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update and return the current temperature measurement resolution from the device.  <a href="ds18b20_8c.html#a6c90f57ce8738ad042f022adb40b864c">More...</a><br /></td></tr>
<tr class="separator:a6c90f57ce8738ad042f022adb40b864c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2d7d5d1dec69e2ae783d42c7d73c517"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#ae2d7d5d1dec69e2ae783d42c7d73c517">ds18b20_convert</a> (const <a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *ds18b20_info)</td></tr>
<tr class="memdesc:ae2d7d5d1dec69e2ae783d42c7d73c517"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a temperature measurement conversion on a single device.  <a href="ds18b20_8c.html#ae2d7d5d1dec69e2ae783d42c7d73c517">More...</a><br /></td></tr>
<tr class="separator:ae2d7d5d1dec69e2ae783d42c7d73c517"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1d5ef99f9be1eb8bf72b793a71fa259"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#ad1d5ef99f9be1eb8bf72b793a71fa259">ds18b20_convert_all</a> (const OneWireBus *bus)</td></tr>
<tr class="memdesc:ad1d5ef99f9be1eb8bf72b793a71fa259"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start temperature conversion on all connected devices.  <a href="ds18b20_8c.html#ad1d5ef99f9be1eb8bf72b793a71fa259">More...</a><br /></td></tr>
<tr class="separator:ad1d5ef99f9be1eb8bf72b793a71fa259"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76ac59caf970799cedc280d8bc89e020"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a76ac59caf970799cedc280d8bc89e020">ds18b20_wait_for_conversion</a> (const <a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *ds18b20_info)</td></tr>
<tr class="memdesc:a76ac59caf970799cedc280d8bc89e020"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for the maximum conversion time according to the current resolution of the device. In external power mode, the device or devices can signal when conversion has completed. In parasitic power mode, this is not possible, so a pre-calculated delay is performed.  <a href="ds18b20_8c.html#a76ac59caf970799cedc280d8bc89e020">More...</a><br /></td></tr>
<tr class="separator:a76ac59caf970799cedc280d8bc89e020"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f254ca1bc00a2f2a44389c185bdc9b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ds18b20_8h.html#ac262021484a53673e97558f4a873afb0">DS18B20_ERROR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#a7f254ca1bc00a2f2a44389c185bdc9b0">ds18b20_read_temp</a> (const <a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *ds18b20_info, float *value)</td></tr>
<tr class="memdesc:a7f254ca1bc00a2f2a44389c185bdc9b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read last temperature measurement from device.  <a href="ds18b20_8c.html#a7f254ca1bc00a2f2a44389c185bdc9b0">More...</a><br /></td></tr>
<tr class="separator:a7f254ca1bc00a2f2a44389c185bdc9b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcf2ba2f80348d4f6cc1dbd2d771b6a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ds18b20_8h.html#ac262021484a53673e97558f4a873afb0">DS18B20_ERROR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#adcf2ba2f80348d4f6cc1dbd2d771b6a1">ds18b20_convert_and_read_temp</a> (const <a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *ds18b20_info, float *value)</td></tr>
<tr class="memdesc:adcf2ba2f80348d4f6cc1dbd2d771b6a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert, wait and read current temperature from device.  <a href="ds18b20_8c.html#adcf2ba2f80348d4f6cc1dbd2d771b6a1">More...</a><br /></td></tr>
<tr class="separator:adcf2ba2f80348d4f6cc1dbd2d771b6a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad144c72353070a8b49a2f53ff118f18c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ds18b20_8h.html#ac262021484a53673e97558f4a873afb0">DS18B20_ERROR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ds18b20_8c.html#ad144c72353070a8b49a2f53ff118f18c">ds18b20_check_for_parasite_power</a> (const OneWireBus *bus, bool *present)</td></tr>
<tr class="memdesc:ad144c72353070a8b49a2f53ff118f18c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check OneWire bus for presence of parasitic-powered devices.  <a href="ds18b20_8c.html#ad144c72353070a8b49a2f53ff118f18c">More...</a><br /></td></tr>
<tr class="separator:ad144c72353070a8b49a2f53ff118f18c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Resolution is cached in the <a class="el" href="struct_d_s18_b20___info.html" title="Structure containing information related to a single DS18B20 device connected via a 1-Wire bus.">DS18B20_Info</a> object to avoid querying the hardware every time a temperature conversion is required. However this can result in the cached value becoming inconsistent with the hardware value, so care must be taken. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aed8e8a35acbf8bfb53d1ee260a90f216"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed8e8a35acbf8bfb53d1ee260a90f216">&#9670;&nbsp;</a></span>ds18b20_malloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a>* ds18b20_malloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a new device info instance. New instance should be initialised before calling other functions. </p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to new device info instance, or NULL if it cannot be created. </dd></dl>

</div>
</div>
<a id="a5bcd6ceb76caa4add04ca65582eede00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bcd6ceb76caa4add04ca65582eede00">&#9670;&nbsp;</a></span>ds18b20_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ds18b20_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> **&#160;</td>
          <td class="paramname"><em>ds18b20_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete an existing device info instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance that will be freed and set to NULL. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4ebf4dd600763c360de01ef69439f587"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ebf4dd600763c360de01ef69439f587">&#9670;&nbsp;</a></span>ds18b20_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ds18b20_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td>
          <td class="paramname"><em>ds18b20_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const OneWireBus *&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OneWireBus_ROMCode&#160;</td>
          <td class="paramname"><em>rom_code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise a device info instance with the specified GPIO. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>Pointer to initialised 1-Wire bus instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rom_code</td><td>Device-specific ROM code to identify a device on the bus. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a345a04f36d80c7cd63352cdcfe83dd99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a345a04f36d80c7cd63352cdcfe83dd99">&#9670;&nbsp;</a></span>ds18b20_init_solo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ds18b20_init_solo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td>
          <td class="paramname"><em>ds18b20_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const OneWireBus *&#160;</td>
          <td class="paramname"><em>bus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise a device info instance as a solo device on the bus. </p>
<p>This is subject to the requirement that this device is the ONLY device on the bus. This allows for faster commands to be used without ROM code addressing.</p>
<p>NOTE: if additional devices are added to the bus, operation will cease to work correctly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>Pointer to initialised 1-Wire bus instance. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ada1765c5a55c8a389f11f2daebc9e0a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada1765c5a55c8a389f11f2daebc9e0a2">&#9670;&nbsp;</a></span>ds18b20_use_crc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ds18b20_use_crc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td>
          <td class="paramname"><em>ds18b20_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>use_crc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable or disable use of CRC checks on device communications. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">use_crc</td><td>True to enable CRC checks, false to disable. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4d9266fa752d3f6d533250324af16e67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d9266fa752d3f6d533250324af16e67">&#9670;&nbsp;</a></span>ds18b20_set_resolution()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ds18b20_set_resolution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td>
          <td class="paramname"><em>ds18b20_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ds18b20_8h.html#aa5d863756e0d9cb7548b9f166e4af9d4">DS18B20_RESOLUTION</a>&#160;</td>
          <td class="paramname"><em>resolution</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set temperature measurement resolution. </p>
<p>This programs the hardware to the specified resolution and sets the cached value to be the same. If the program fails, the value currently in hardware is used to refresh the cache.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">resolution</td><td>Selected resolution. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if successful, otherwise false. </dd></dl>

</div>
</div>
<a id="a6c90f57ce8738ad042f022adb40b864c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c90f57ce8738ad042f022adb40b864c">&#9670;&nbsp;</a></span>ds18b20_read_resolution()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ds18b20_8h.html#aa5d863756e0d9cb7548b9f166e4af9d4">DS18B20_RESOLUTION</a> ds18b20_read_resolution </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td>
          <td class="paramname"><em>ds18b20_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update and return the current temperature measurement resolution from the device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The currently configured temperature measurement resolution. </dd></dl>

</div>
</div>
<a id="ae2d7d5d1dec69e2ae783d42c7d73c517"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2d7d5d1dec69e2ae783d42c7d73c517">&#9670;&nbsp;</a></span>ds18b20_convert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ds18b20_convert </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td>
          <td class="paramname"><em>ds18b20_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a temperature measurement conversion on a single device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad1d5ef99f9be1eb8bf72b793a71fa259"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1d5ef99f9be1eb8bf72b793a71fa259">&#9670;&nbsp;</a></span>ds18b20_convert_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ds18b20_convert_all </td>
          <td>(</td>
          <td class="paramtype">const OneWireBus *&#160;</td>
          <td class="paramname"><em>bus</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start temperature conversion on all connected devices. </p>
<p>This should be followed by a sufficient delay to ensure all devices complete their conversion before the measurements are read. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>Pointer to initialised bus instance. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a76ac59caf970799cedc280d8bc89e020"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76ac59caf970799cedc280d8bc89e020">&#9670;&nbsp;</a></span>ds18b20_wait_for_conversion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float ds18b20_wait_for_conversion </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td>
          <td class="paramname"><em>ds18b20_info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for the maximum conversion time according to the current resolution of the device. In external power mode, the device or devices can signal when conversion has completed. In parasitic power mode, this is not possible, so a pre-calculated delay is performed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An estimate of the time elapsed, in milliseconds. Actual elapsed time may be greater. </dd></dl>

</div>
</div>
<a id="a7f254ca1bc00a2f2a44389c185bdc9b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f254ca1bc00a2f2a44389c185bdc9b0">&#9670;&nbsp;</a></span>ds18b20_read_temp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ds18b20_8h.html#ac262021484a53673e97558f4a873afb0">DS18B20_ERROR</a> ds18b20_read_temp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td>
          <td class="paramname"><em>ds18b20_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read last temperature measurement from device. </p>
<p>This is typically called after ds18b20_start_mass_conversion(), provided enough time has elapsed to ensure that all devices have completed their conversions. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. Must be initialised first. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">value</td><td>Pointer to the measurement value returned by the device, in degrees Celsius. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DS18B20_OK if read is successful, otherwise error. </dd></dl>

</div>
</div>
<a id="adcf2ba2f80348d4f6cc1dbd2d771b6a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcf2ba2f80348d4f6cc1dbd2d771b6a1">&#9670;&nbsp;</a></span>ds18b20_convert_and_read_temp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ds18b20_8h.html#ac262021484a53673e97558f4a873afb0">DS18B20_ERROR</a> ds18b20_convert_and_read_temp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_d_s18_b20___info.html">DS18B20_Info</a> *&#160;</td>
          <td class="paramname"><em>ds18b20_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert, wait and read current temperature from device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ds18b20_info</td><td>Pointer to device info instance. Must be initialised first. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">value</td><td>Pointer to the measurement value returned by the device, in degrees Celsius. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DS18B20_OK if read is successful, otherwise error. </dd></dl>

</div>
</div>
<a id="ad144c72353070a8b49a2f53ff118f18c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad144c72353070a8b49a2f53ff118f18c">&#9670;&nbsp;</a></span>ds18b20_check_for_parasite_power()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ds18b20_8h.html#ac262021484a53673e97558f4a873afb0">DS18B20_ERROR</a> ds18b20_check_for_parasite_power </td>
          <td>(</td>
          <td class="paramtype">const OneWireBus *&#160;</td>
          <td class="paramname"><em>bus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>present</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check OneWire bus for presence of parasitic-powered devices. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">bus</td><td>Pointer to initialised bus instance. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">present</td><td>Result value, true if a parasitic-powered device was detected. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>DS18B20_OK if check is successful, otherwise error. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
